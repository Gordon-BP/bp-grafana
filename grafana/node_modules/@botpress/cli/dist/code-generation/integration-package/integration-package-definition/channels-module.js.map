{
  "version": 3,
  "sources": ["../../../../src/code-generation/integration-package/integration-package-definition/channels-module.ts"],
  "sourcesContent": ["import { GENERATED_HEADER, INDEX_FILE } from '../../consts'\nimport { jsonSchemaToTypescriptZuiSchema, stringifySingleLine } from '../../generators'\nimport { Module, ReExportVariableModule } from '../../module'\nimport * as strings from '../../strings'\nimport * as types from './typings'\n\nclass MessageModule extends Module {\n  public constructor(name: string, private _message: types.ApiMessageDefinition) {\n    super({\n      path: `${name}.ts`,\n      exportName: strings.varName(name),\n    })\n  }\n\n  public async getContent() {\n    return jsonSchemaToTypescriptZuiSchema(this._message.schema, this.exportName)\n  }\n}\n\nclass MessagesModule extends ReExportVariableModule {\n  public constructor(channel: types.ApiChannelDefinition) {\n    super({ exportName: strings.varName('messages') })\n    for (const [messageName, message] of Object.entries(channel.messages ?? {})) {\n      const module = new MessageModule(messageName, message)\n      this.pushDep(module)\n    }\n  }\n}\n\nclass ChannelModule extends Module {\n  private _messagesModule: MessagesModule\n\n  public constructor(channelName: string, private _channel: types.ApiChannelDefinition) {\n    super({\n      path: INDEX_FILE,\n      exportName: strings.varName(channelName),\n    })\n\n    this._messagesModule = new MessagesModule(_channel)\n    this._messagesModule.unshift('messages')\n    this.pushDep(this._messagesModule)\n  }\n\n  public async getContent() {\n    const messageImport = this._messagesModule.import(this)\n\n    const conversation = {\n      tags: this._channel.conversation?.tags ?? {},\n      creation: this._channel.conversation?.creation ?? { enabled: false, requiredTags: [] },\n    }\n\n    const message = {\n      tags: this._channel.message?.tags ?? {},\n    }\n\n    return [\n      GENERATED_HEADER,\n      `import { ${this._messagesModule.exportName} } from './${messageImport}'`,\n      `export * from './${messageImport}'`,\n      '',\n      `export const ${this.exportName} = {`,\n      `  messages: ${this._messagesModule.exportName},`,\n      `  message: ${stringifySingleLine(message)},`,\n      `  conversation: ${stringifySingleLine(conversation)},`,\n      '}',\n    ].join('\\n')\n  }\n}\n\nexport class ChannelsModule extends ReExportVariableModule {\n  public constructor(channels: Record<string, types.ApiChannelDefinition>) {\n    super({ exportName: strings.varName('channels') })\n    for (const [channelName, channel] of Object.entries(channels)) {\n      const module = new ChannelModule(channelName, channel)\n      module.unshift(channelName)\n      this.pushDep(module)\n    }\n  }\n}\n"],
  "mappings": ";;;;;;;;;;;;;;;;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAA6C;AAC7C,wBAAqE;AACrE,oBAA+C;AAC/C,cAAyB;AAGzB,MAAM,sBAAsB,qBAAO;AAAA,EAC1B,YAAY,MAAsB,UAAsC;AAC7E,UAAM;AAAA,MACJ,MAAM,GAAG;AAAA,MACT,YAAY,QAAQ,QAAQ,IAAI;AAAA,IAClC,CAAC;AAJsC;AAAA,EAKzC;AAAA,EAEA,MAAa,aAAa;AACxB,eAAO,mDAAgC,KAAK,SAAS,QAAQ,KAAK,UAAU;AAAA,EAC9E;AACF;AAEA,MAAM,uBAAuB,qCAAuB;AAAA,EAC3C,YAAY,SAAqC;AACtD,UAAM,EAAE,YAAY,QAAQ,QAAQ,UAAU,EAAE,CAAC;AACjD,eAAW,CAAC,aAAa,OAAO,KAAK,OAAO,QAAQ,QAAQ,YAAY,CAAC,CAAC,GAAG;AAC3E,YAAMA,UAAS,IAAI,cAAc,aAAa,OAAO;AACrD,WAAK,QAAQA,OAAM;AAAA,IACrB;AAAA,EACF;AACF;AAEA,MAAM,sBAAsB,qBAAO;AAAA,EAG1B,YAAY,aAA6B,UAAsC;AACpF,UAAM;AAAA,MACJ,MAAM;AAAA,MACN,YAAY,QAAQ,QAAQ,WAAW;AAAA,IACzC,CAAC;AAJ6C;AAM9C,SAAK,kBAAkB,IAAI,eAAe,QAAQ;AAClD,SAAK,gBAAgB,QAAQ,UAAU;AACvC,SAAK,QAAQ,KAAK,eAAe;AAAA,EACnC;AAAA,EAXQ;AAAA,EAaR,MAAa,aAAa;AACxB,UAAM,gBAAgB,KAAK,gBAAgB,OAAO,IAAI;AAEtD,UAAM,eAAe;AAAA,MACnB,MAAM,KAAK,SAAS,cAAc,QAAQ,CAAC;AAAA,MAC3C,UAAU,KAAK,SAAS,cAAc,YAAY,EAAE,SAAS,OAAO,cAAc,CAAC,EAAE;AAAA,IACvF;AAEA,UAAM,UAAU;AAAA,MACd,MAAM,KAAK,SAAS,SAAS,QAAQ,CAAC;AAAA,IACxC;AAEA,WAAO;AAAA,MACL;AAAA,MACA,YAAY,KAAK,gBAAgB,wBAAwB;AAAA,MACzD,oBAAoB;AAAA,MACpB;AAAA,MACA,gBAAgB,KAAK;AAAA,MACrB,eAAe,KAAK,gBAAgB;AAAA,MACpC,kBAAc,uCAAoB,OAAO;AAAA,MACzC,uBAAmB,uCAAoB,YAAY;AAAA,MACnD;AAAA,IACF,EAAE,KAAK,IAAI;AAAA,EACb;AACF;AAEO,MAAM,uBAAuB,qCAAuB;AAAA,EAClD,YAAY,UAAsD;AACvE,UAAM,EAAE,YAAY,QAAQ,QAAQ,UAAU,EAAE,CAAC;AACjD,eAAW,CAAC,aAAa,OAAO,KAAK,OAAO,QAAQ,QAAQ,GAAG;AAC7D,YAAMA,UAAS,IAAI,cAAc,aAAa,OAAO;AACrD,MAAAA,QAAO,QAAQ,WAAW;AAC1B,WAAK,QAAQA,OAAM;AAAA,IACrB;AAAA,EACF;AACF;",
  "names": ["module"]
}
