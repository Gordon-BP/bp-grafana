"use strict";
var import_vitest = require("vitest");
var import_bot = require("../rulesets/bot.ruleset");
var import_common = require("./common");
const describeRule = (0, import_common.createDescribeRule)()(import_bot.BOT_RULESET);
const EMPTY_STRING = "";
const TRUTHY_STRING = "truthy";
const EVENT_NAME = "eventName";
const PARAM_NAME = "paramName";
const PROPERTIES_PARAM = "properties";
const PARAM_NAMES = [PARAM_NAME, PROPERTIES_PARAM];
const TAG_NAME = "tagName";
const STATE_NAME = "stateName";
const ZUI = "x-zui";
const LEGACY_ZUI = "ui";
describeRule("event-outputparams-should-have-title", (lint) => {
  import_vitest.test.each(PARAM_NAMES)("missing title should trigger (%s)", async (paramName) => {
    const definition = {
      events: { [EVENT_NAME]: { schema: { properties: { [paramName]: { [ZUI]: {} } } } } }
    };
    const results = await lint(definition);
    (0, import_vitest.expect)(results).toHaveLength(1);
    (0, import_vitest.expect)(results[0]?.path).toEqual(["events", EVENT_NAME, "schema", "properties", paramName, ZUI]);
    (0, import_vitest.expect)(results[0]?.message).toContain("title");
  });
  import_vitest.test.each(PARAM_NAMES)("empty title should trigger (%s)", async (paramName) => {
    const definition = {
      events: {
        [EVENT_NAME]: { schema: { properties: { [paramName]: { [ZUI]: { title: EMPTY_STRING } } } } }
      }
    };
    const results = await lint(definition);
    (0, import_vitest.expect)(results).toHaveLength(1);
    (0, import_vitest.expect)(results[0]?.path).toEqual(["events", EVENT_NAME, "schema", "properties", paramName, ZUI, "title"]);
    (0, import_vitest.expect)(results[0]?.message).toContain("title");
  });
  import_vitest.test.each(PARAM_NAMES)("valid title should not trigger (%s)", async (paramName) => {
    const definition = {
      events: {
        [EVENT_NAME]: { schema: { properties: { [paramName]: { [ZUI]: { title: TRUTHY_STRING } } } } }
      }
    };
    const results = await lint(definition);
    (0, import_vitest.expect)(results).toHaveLength(0);
  });
});
describeRule("event-outputparams-must-have-description", (lint) => {
  import_vitest.test.each(PARAM_NAMES)("missing description should trigger (%s)", async (paramName) => {
    const definition = {
      events: { [EVENT_NAME]: { schema: { properties: { [paramName]: {} } } } }
    };
    const results = await lint(definition);
    (0, import_vitest.expect)(results).toHaveLength(1);
    (0, import_vitest.expect)(results[0]?.path).toEqual(["events", EVENT_NAME, "schema", "properties", paramName]);
    (0, import_vitest.expect)(results[0]?.message).toContain("description");
  });
  import_vitest.test.each(PARAM_NAMES)("empty description should trigger (%s)", async (paramName) => {
    const definition = {
      events: {
        [EVENT_NAME]: { schema: { properties: { [paramName]: { description: EMPTY_STRING } } } }
      }
    };
    const results = await lint(definition);
    (0, import_vitest.expect)(results).toHaveLength(1);
    (0, import_vitest.expect)(results[0]?.path).toEqual(["events", EVENT_NAME, "schema", "properties", paramName, "description"]);
    (0, import_vitest.expect)(results[0]?.message).toContain("description");
  });
  import_vitest.test.each(PARAM_NAMES)("valid description should not trigger (%s)", async (paramName) => {
    const definition = {
      events: {
        [EVENT_NAME]: { schema: { properties: { [paramName]: { description: TRUTHY_STRING } } } }
      }
    };
    const results = await lint(definition);
    (0, import_vitest.expect)(results).toHaveLength(0);
  });
});
describeRule("configuration-fields-must-have-a-title", (lint) => {
  import_vitest.test.each(PARAM_NAMES)("missing title should trigger (%s)", async (paramName) => {
    const definition = {
      configuration: { schema: { properties: { [paramName]: { [ZUI]: {} } } } }
    };
    const results = await lint(definition);
    (0, import_vitest.expect)(results).toHaveLength(1);
    (0, import_vitest.expect)(results[0]?.path).toEqual(["configuration", "schema", "properties", paramName, ZUI]);
    (0, import_vitest.expect)(results[0]?.message).toContain("title");
  });
  import_vitest.test.each(PARAM_NAMES)("empty title should trigger (%s)", async (paramName) => {
    const definition = {
      configuration: { schema: { properties: { [paramName]: { [ZUI]: { title: EMPTY_STRING } } } } }
    };
    const results = await lint(definition);
    (0, import_vitest.expect)(results).toHaveLength(1);
    (0, import_vitest.expect)(results[0]?.path).toEqual(["configuration", "schema", "properties", paramName, ZUI, "title"]);
    (0, import_vitest.expect)(results[0]?.message).toContain("title");
  });
  import_vitest.test.each(PARAM_NAMES)("valid title should not trigger (%s)", async (paramName) => {
    const definition = {
      configuration: { schema: { properties: { [paramName]: { [ZUI]: { title: TRUTHY_STRING } } } } }
    };
    const results = await lint(definition);
    (0, import_vitest.expect)(results).toHaveLength(0);
  });
});
describeRule("configuration-fields-must-have-a-description", (lint) => {
  import_vitest.test.each(PARAM_NAMES)("missing description should trigger (%s)", async (paramName) => {
    const definition = {
      configuration: { schema: { properties: { [paramName]: {} } } }
    };
    const results = await lint(definition);
    (0, import_vitest.expect)(results).toHaveLength(1);
    (0, import_vitest.expect)(results[0]?.path).toEqual(["configuration", "schema", "properties", paramName]);
    (0, import_vitest.expect)(results[0]?.message).toContain("description");
  });
  import_vitest.test.each(PARAM_NAMES)("empty description should trigger (%s)", async (paramName) => {
    const definition = {
      configuration: { schema: { properties: { [paramName]: { description: EMPTY_STRING } } } }
    };
    const results = await lint(definition);
    (0, import_vitest.expect)(results).toHaveLength(1);
    (0, import_vitest.expect)(results[0]?.path).toEqual(["configuration", "schema", "properties", paramName, "description"]);
    (0, import_vitest.expect)(results[0]?.message).toContain("description");
  });
  import_vitest.test.each(PARAM_NAMES)("valid description should not trigger (%s)", async (paramName) => {
    const definition = {
      configuration: { schema: { properties: { [paramName]: { description: TRUTHY_STRING } } } }
    };
    const results = await lint(definition);
    (0, import_vitest.expect)(results).toHaveLength(0);
  });
});
describeRule("user-tags-should-have-a-title", (lint) => {
  (0, import_vitest.test)("missing title should trigger", async () => {
    const definition = { user: { tags: { [TAG_NAME]: {} } } };
    const results = await lint(definition);
    (0, import_vitest.expect)(results).toHaveLength(1);
    (0, import_vitest.expect)(results[0]?.path).toEqual(["user", "tags", TAG_NAME]);
    (0, import_vitest.expect)(results[0]?.message).toContain("title");
  });
  (0, import_vitest.test)("empty title should trigger", async () => {
    const definition = { user: { tags: { [TAG_NAME]: { title: EMPTY_STRING } } } };
    const results = await lint(definition);
    (0, import_vitest.expect)(results).toHaveLength(1);
    (0, import_vitest.expect)(results[0]?.path).toEqual(["user", "tags", TAG_NAME, "title"]);
    (0, import_vitest.expect)(results[0]?.message).toContain("title");
  });
  (0, import_vitest.test)("valid title should not trigger", async () => {
    const definition = { user: { tags: { [TAG_NAME]: { title: TRUTHY_STRING } } } };
    const results = await lint(definition);
    (0, import_vitest.expect)(results).toHaveLength(0);
  });
});
describeRule("user-tags-must-have-a-description", (lint) => {
  (0, import_vitest.test)("missing description should trigger", async () => {
    const definition = { user: { tags: { [TAG_NAME]: {} } } };
    const results = await lint(definition);
    (0, import_vitest.expect)(results).toHaveLength(1);
    (0, import_vitest.expect)(results[0]?.path).toEqual(["user", "tags", TAG_NAME]);
    (0, import_vitest.expect)(results[0]?.message).toContain("description");
  });
  (0, import_vitest.test)("empty description should trigger", async () => {
    const definition = {
      user: { tags: { [TAG_NAME]: { description: EMPTY_STRING } } }
    };
    const results = await lint(definition);
    (0, import_vitest.expect)(results).toHaveLength(1);
    (0, import_vitest.expect)(results[0]?.path).toEqual(["user", "tags", TAG_NAME, "description"]);
    (0, import_vitest.expect)(results[0]?.message).toContain("description");
  });
  (0, import_vitest.test)("valid description should not trigger", async () => {
    const definition = {
      user: { tags: { [TAG_NAME]: { description: TRUTHY_STRING } } }
    };
    const results = await lint(definition);
    (0, import_vitest.expect)(results).toHaveLength(0);
  });
});
describeRule("conversation-tags-should-have-a-title", (lint) => {
  (0, import_vitest.test)("missing title should trigger", async () => {
    const definition = { conversation: { tags: { [TAG_NAME]: {} } } };
    const results = await lint(definition);
    (0, import_vitest.expect)(results).toHaveLength(1);
    (0, import_vitest.expect)(results[0]?.path).toEqual(["conversation", "tags", TAG_NAME]);
    (0, import_vitest.expect)(results[0]?.message).toContain("title");
  });
  (0, import_vitest.test)("empty title should trigger", async () => {
    const definition = {
      conversation: { tags: { [TAG_NAME]: { title: EMPTY_STRING } } }
    };
    const results = await lint(definition);
    (0, import_vitest.expect)(results).toHaveLength(1);
    (0, import_vitest.expect)(results[0]?.path).toEqual(["conversation", "tags", TAG_NAME, "title"]);
    (0, import_vitest.expect)(results[0]?.message).toContain("title");
  });
  (0, import_vitest.test)("valid title should not trigger", async () => {
    const definition = {
      conversation: { tags: { [TAG_NAME]: { title: TRUTHY_STRING } } }
    };
    const results = await lint(definition);
    (0, import_vitest.expect)(results).toHaveLength(0);
  });
});
describeRule("conversation-tags-must-have-a-description", (lint) => {
  (0, import_vitest.test)("missing description should trigger", async () => {
    const definition = { conversation: { tags: { [TAG_NAME]: {} } } };
    const results = await lint(definition);
    (0, import_vitest.expect)(results).toHaveLength(1);
    (0, import_vitest.expect)(results[0]?.path).toEqual(["conversation", "tags", TAG_NAME]);
    (0, import_vitest.expect)(results[0]?.message).toContain("description");
  });
  (0, import_vitest.test)("empty description should trigger", async () => {
    const definition = {
      conversation: { tags: { [TAG_NAME]: { description: EMPTY_STRING } } }
    };
    const results = await lint(definition);
    (0, import_vitest.expect)(results).toHaveLength(1);
    (0, import_vitest.expect)(results[0]?.path).toEqual(["conversation", "tags", TAG_NAME, "description"]);
    (0, import_vitest.expect)(results[0]?.message).toContain("description");
  });
  (0, import_vitest.test)("valid description should not trigger", async () => {
    const definition = {
      conversation: { tags: { [TAG_NAME]: { description: TRUTHY_STRING } } }
    };
    const results = await lint(definition);
    (0, import_vitest.expect)(results).toHaveLength(0);
  });
});
describeRule("message-tags-should-have-a-title", (lint) => {
  (0, import_vitest.test)("missing title should trigger", async () => {
    const definition = { message: { tags: { [TAG_NAME]: {} } } };
    const results = await lint(definition);
    (0, import_vitest.expect)(results).toHaveLength(1);
    (0, import_vitest.expect)(results[0]?.path).toEqual(["message", "tags", TAG_NAME]);
    (0, import_vitest.expect)(results[0]?.message).toContain("title");
  });
  (0, import_vitest.test)("empty title should trigger", async () => {
    const definition = {
      message: { tags: { [TAG_NAME]: { title: EMPTY_STRING } } }
    };
    const results = await lint(definition);
    (0, import_vitest.expect)(results).toHaveLength(1);
    (0, import_vitest.expect)(results[0]?.path).toEqual(["message", "tags", TAG_NAME, "title"]);
    (0, import_vitest.expect)(results[0]?.message).toContain("title");
  });
  (0, import_vitest.test)("valid title should not trigger", async () => {
    const definition = {
      message: { tags: { [TAG_NAME]: { title: TRUTHY_STRING } } }
    };
    const results = await lint(definition);
    (0, import_vitest.expect)(results).toHaveLength(0);
  });
});
describeRule("message-tags-must-have-a-description", (lint) => {
  (0, import_vitest.test)("missing description should trigger", async () => {
    const definition = { message: { tags: { [TAG_NAME]: {} } } };
    const results = await lint(definition);
    (0, import_vitest.expect)(results).toHaveLength(1);
    (0, import_vitest.expect)(results[0]?.path).toEqual(["message", "tags", TAG_NAME]);
    (0, import_vitest.expect)(results[0]?.message).toContain("description");
  });
  (0, import_vitest.test)("empty description should trigger", async () => {
    const definition = {
      message: { tags: { [TAG_NAME]: { description: EMPTY_STRING } } }
    };
    const results = await lint(definition);
    (0, import_vitest.expect)(results).toHaveLength(1);
    (0, import_vitest.expect)(results[0]?.path).toEqual(["message", "tags", TAG_NAME, "description"]);
    (0, import_vitest.expect)(results[0]?.message).toContain("description");
  });
  (0, import_vitest.test)("valid description should not trigger", async () => {
    const definition = {
      message: { tags: { [TAG_NAME]: { description: TRUTHY_STRING } } }
    };
    const results = await lint(definition);
    (0, import_vitest.expect)(results).toHaveLength(0);
  });
});
describeRule("legacy-zui-title-should-be-removed", (lint) => {
  import_vitest.test.each(PARAM_NAMES)("legacy zui title should trigger (%s)", async (paramName) => {
    const definition = {
      configuration: {
        [LEGACY_ZUI]: { [paramName]: { title: TRUTHY_STRING } },
        schema: {}
      },
      events: { [EVENT_NAME]: { [LEGACY_ZUI]: { [paramName]: { title: TRUTHY_STRING } }, schema: {} } },
      states: { [STATE_NAME]: { [LEGACY_ZUI]: { [paramName]: { title: TRUTHY_STRING } }, schema: {} } }
    };
    const results = await lint(definition);
    (0, import_vitest.expect)(results).toHaveLength(3);
    (0, import_vitest.expect)(results[0]?.message).toContain(".title()");
  });
});
describeRule("legacy-zui-examples-should-be-removed", (lint) => {
  import_vitest.test.each(PARAM_NAMES)("legacy zui examples should trigger (%s)", async (paramName) => {
    const definition = {
      configuration: {
        [LEGACY_ZUI]: { [paramName]: { examples: [TRUTHY_STRING] } },
        schema: {}
      },
      events: { [EVENT_NAME]: { [LEGACY_ZUI]: { [paramName]: { examples: [TRUTHY_STRING] } }, schema: {} } },
      states: { [STATE_NAME]: { [LEGACY_ZUI]: { [paramName]: { examples: [TRUTHY_STRING] } }, schema: {} } }
    };
    const results = await lint(definition);
    (0, import_vitest.expect)(results).toHaveLength(3);
    (0, import_vitest.expect)(results[0]?.message).toContain("examples");
  });
});
describeRule("state-fields-should-have-title", (lint) => {
  import_vitest.test.each(PARAM_NAMES)("missing title should trigger (%s)", async (paramName) => {
    const definition = {
      states: { [STATE_NAME]: { schema: { properties: { [paramName]: { [ZUI]: {} } } } } }
    };
    const results = await lint(definition);
    (0, import_vitest.expect)(results).toHaveLength(1);
    (0, import_vitest.expect)(results[0]?.path).toEqual(["states", STATE_NAME, "schema", "properties", paramName, ZUI]);
  });
  import_vitest.test.each(PARAM_NAMES)("empty title should trigger (%s)", async (paramName) => {
    const definition = {
      states: { [STATE_NAME]: { schema: { properties: { [paramName]: { [ZUI]: { title: EMPTY_STRING } } } } } }
    };
    const results = await lint(definition);
    (0, import_vitest.expect)(results).toHaveLength(1);
    (0, import_vitest.expect)(results[0]?.path).toEqual(["states", STATE_NAME, "schema", "properties", paramName, ZUI, "title"]);
  });
  import_vitest.test.each(PARAM_NAMES)("valid title should not trigger (%s)", async (paramName) => {
    const definition = {
      states: { [STATE_NAME]: { schema: { properties: { [paramName]: { [ZUI]: { title: TRUTHY_STRING } } } } } }
    };
    const results = await lint(definition);
    (0, import_vitest.expect)(results).toHaveLength(0);
  });
});
describeRule("state-fields-must-have-description", (lint) => {
  import_vitest.test.each(PARAM_NAMES)("missing description should trigger (%s)", async (paramName) => {
    const definition = {
      states: { [STATE_NAME]: { schema: { properties: { [paramName]: {} } } } }
    };
    const results = await lint(definition);
    (0, import_vitest.expect)(results).toHaveLength(1);
    (0, import_vitest.expect)(results[0]?.path).toEqual(["states", STATE_NAME, "schema", "properties", paramName]);
  });
  import_vitest.test.each(PARAM_NAMES)("empty description should trigger (%s)", async (paramName) => {
    const definition = {
      states: { [STATE_NAME]: { schema: { properties: { [paramName]: { description: EMPTY_STRING } } } } }
    };
    const results = await lint(definition);
    (0, import_vitest.expect)(results).toHaveLength(1);
    (0, import_vitest.expect)(results[0]?.path).toEqual(["states", STATE_NAME, "schema", "properties", paramName, "description"]);
  });
  import_vitest.test.each(PARAM_NAMES)("valid description should not trigger (%s)", async (paramName) => {
    const definition = {
      states: { [STATE_NAME]: { schema: { properties: { [paramName]: { description: TRUTHY_STRING } } } } }
    };
    const results = await lint(definition);
    (0, import_vitest.expect)(results).toHaveLength(0);
  });
});
//# sourceMappingURL=bot.ruleset.test.js.map
