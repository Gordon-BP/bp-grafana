{
  "version": 3,
  "sources": ["../../../src/code-generation/bot-implementation/bot-implementation.ts"],
  "sourcesContent": ["import * as sdk from '@botpress/sdk'\nimport * as consts from '../consts'\nimport { Module } from '../module'\nimport { BotTypingsModule } from './bot-typings'\n\nexport class BotImplementationModule extends Module {\n  private _typingsModule: BotTypingsModule\n\n  public constructor(bot: sdk.BotDefinition) {\n    super({\n      exportName: 'Bot',\n      path: consts.INDEX_FILE,\n    })\n\n    this._typingsModule = new BotTypingsModule(bot)\n    this._typingsModule.unshift('typings')\n    this.pushDep(this._typingsModule)\n  }\n\n  public async getContent() {\n    const typingsImport = this._typingsModule.import(this)\n\n    return [\n      consts.GENERATED_HEADER,\n      'import * as sdk from \"@botpress/sdk\"',\n      `import * as ${this._typingsModule.name} from \"./${typingsImport}\"`,\n      `export * from \"./${typingsImport}\"`,\n      '',\n      `type TBot = sdk.DefaultBot<${this._typingsModule.name}.${this._typingsModule.exportName}>`,\n      '',\n      'export class Bot extends sdk.Bot<TBot> {}',\n      '',\n      '// extra types',\n      '',\n      'type AsyncFunction = (...args: any[]) => Promise<any>',\n      \"export type EventHandler = Parameters<Bot['event']>[0]\",\n      'export type EventHandlerProps = Parameters<EventHandler>[0]',\n      \"export type MessageHandler = Parameters<Bot['message']>[0]\",\n      'export type MessageHandlerProps = Parameters<MessageHandler>[0]',\n      \"export type Client = EventHandlerProps['client']\",\n      'export type ClientOperation = keyof {',\n      '  [K in keyof Client as Client[K] extends AsyncFunction ? K : never]: null',\n      '}',\n      'export type ClientInputs = {',\n      '  [K in ClientOperation]: Parameters<Client[K]>[0]',\n      '}',\n      'export type ClientOutputs = {',\n      '  [K in ClientOperation]: Awaited<ReturnType<Client[K]>>',\n      '}',\n      '// @deprecated',\n      \"export type BotEvent = EventHandlerProps['event']\",\n      '// @deprecated',\n      'export type BotEvents = {',\n      \"  [K in BotEvent['type']]: Extract<BotEvent, { type: K }>\",\n      '}',\n      '// @deprecated',\n      \"export type BotState = ClientOutputs['getState']['state']\",\n      '// @deprecated',\n      'export type BotStates = {',\n      \"  [K in BotState['name']]: Extract<BotState, { type: K }>['payload']\",\n      '}',\n    ].join('\\n')\n  }\n}\n"],
  "mappings": ";;;;;;;;;;;;;;;;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AACA,aAAwB;AACxB,oBAAuB;AACvB,yBAAiC;AAE1B,MAAM,gCAAgC,qBAAO;AAAA,EAC1C;AAAA,EAED,YAAY,KAAwB;AACzC,UAAM;AAAA,MACJ,YAAY;AAAA,MACZ,MAAM,OAAO;AAAA,IACf,CAAC;AAED,SAAK,iBAAiB,IAAI,oCAAiB,GAAG;AAC9C,SAAK,eAAe,QAAQ,SAAS;AACrC,SAAK,QAAQ,KAAK,cAAc;AAAA,EAClC;AAAA,EAEA,MAAa,aAAa;AACxB,UAAM,gBAAgB,KAAK,eAAe,OAAO,IAAI;AAErD,WAAO;AAAA,MACL,OAAO;AAAA,MACP;AAAA,MACA,eAAe,KAAK,eAAe,gBAAgB;AAAA,MACnD,oBAAoB;AAAA,MACpB;AAAA,MACA,8BAA8B,KAAK,eAAe,QAAQ,KAAK,eAAe;AAAA,MAC9E;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,IACF,EAAE,KAAK,IAAI;AAAA,EACb;AACF;",
  "names": []
}
